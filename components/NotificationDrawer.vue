<template>
    <div>
        <span @click="toggleDrawer"><img :class="{ 'animate-bounce': data.alerts.length > 0 }" class="h-6"
                src="https://img.icons8.com/?size=512&id=11642&format=png"></span>
        <div v-if="showDrawer"
            class="overflow-auto bg-white border border-slate-500 fixed z-50 cursor-pointer w-1/5 h-1/2 rounded-md  p-2 shadow-lg">
            <div class="text-black font-bold">
                Notications
            </div>
            <div class="flex flex-col">
                <div v-for="alert in data.alerts" :key="alert.id"
                    class="m-1 flex font-normal text-slate-400 bg-slate-200  text-center border rounded border-slate-200 p-2 ">
                    <img class="h-6 mx-2" src="https://img.icons8.com/?size=512&id=21063&format=png" />
                    {{ alert.message }}
                </div>

            </div>

        </div>
    </div>
</template>
<style></style>
  
<script setup>
const query = gql`query Query {
  alerts {
    id
    message
    isViewed
    sender_id
    blog_id
  }
}`

const { data, execute } = useAsyncQuery(query)


// watch(() => showDrawer, () => )
const showDrawer = ref(false);
watch(showDrawer, () => {
    execute();
});
function toggleDrawer() {
    showDrawer.value = !showDrawer.value;
}
</script>